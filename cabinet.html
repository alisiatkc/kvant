<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç | –ü–µ–¥–∞–≥–æ–≥–∏—á–µ—Å–∫–∏–π —Ç–µ—Ö–Ω–æ–ø–∞—Ä–∫</title>
  <!-- Inter font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
  <!-- Feather icons -->
  <script src="https://unpkg.com/feather-icons"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Inter", -apple-system, BlinkMacSystemFont, sans-serif;
      background: #f5f7fb;
      color: #1b1f2b;
      line-height: 1.5;
    }

    .container {
      max-width: 1280px;
      margin: 0 auto;
      padding: 0 32px;
    }

    /* –®–∞–ø–∫–∞ */
    .header {
      padding: 24px 0;
      border-bottom: 1px solid rgba(0, 0, 0, 0.03);
      background: white;
    }

    .header-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .logo a {
      font-size: 1.5rem;
      font-weight: 600;
      text-decoration: none;
      color: #1b1f2b;
    }

    .back-link {
      display: flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
      color: #2b3b6b;
      font-weight: 500;
    }

    /* –ö–∞—Ä—Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ */
    .login-section {
      min-height: 70vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 60px 0;
    }

    .login-card {
      background: white;
      border-radius: 48px;
      padding: 56px 48px;
      max-width: 480px;
      width: 100%;
      box-shadow: 0 20px 40px -15px rgba(0,0,0,0.1);
    }

    .login-card h2 {
      font-size: 2.2rem;
      font-weight: 500;
      margin-bottom: 12px;
    }

    .login-sub {
      color: #3f4a6b;
      font-weight: 300;
      margin-bottom: 32px;
    }

    .track-selector {
      display: flex;
      gap: 12px;
      margin-bottom: 32px;
    }

    .track-btn {
      flex: 1;
      padding: 14px;
      border: 1px solid #e2e8f0;
      border-radius: 40px;
      background: white;
      font-family: inherit;
      font-size: 1rem;
      font-weight: 500;
      color: #1b1f2b;
      cursor: pointer;
      transition: all 0.2s;
    }

    .track-btn.active {
      background: #2b3b6b;
      color: white;
      border-color: #2b3b6b;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      font-size: 0.9rem;
      color: #3f4a6b;
    }

    .form-group input {
      width: 100%;
      padding: 14px 20px;
      border: 1px solid #e2e8f0;
      border-radius: 40px;
      font-family: inherit;
      font-size: 1rem;
      background: #f9fcff;
    }

    .form-group input:focus {
      outline: none;
      border-color: #2b3b6b;
    }

    .login-btn {
      width: 100%;
      padding: 16px;
      background: #1b1f2b;
      color: white;
      border: none;
      border-radius: 40px;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: background 0.2s;
      margin-top: 16px;
    }

    .login-btn:hover {
      background: #2b3b6b;
    }

    .social-login {
      margin-top: 32px;
      text-align: center;
    }

    .social-login p {
      color: #7c8aa5;
      font-size: 0.9rem;
      margin-bottom: 16px;
      position: relative;
    }

    .social-login p::before,
    .social-login p::after {
      content: '';
      position: absolute;
      top: 50%;
      width: 30%;
      height: 1px;
      background: #e2e8f0;
    }

    .social-login p::before { left: 0; }
    .social-login p::after { right: 0; }

    .social-buttons {
      display: flex;
      gap: 12px;
      justify-content: center;
    }

    .social-btn {
      padding: 12px 24px;
      border: 1px solid #e2e8f0;
      border-radius: 40px;
      background: white;
      display: flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
      color: #1b1f2b;
      font-weight: 500;
      transition: background 0.2s;
    }

    .social-btn:hover {
      background: #f0f4fe;
    }

    .social-btn i {
      width: 20px;
      height: 20px;
      color: #2b3b6b;
    }

    /* –ö–æ–º–∞–Ω–¥–∞ (–ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞) */
    .team-section {
      display: none;
      margin-top: 40px;
    }

    .team-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 24px;
    }

    .team-header h3 {
      font-size: 1.8rem;
      font-weight: 500;
    }

    .create-team-btn {
      padding: 12px 24px;
      background: #2b3b6b;
      color: white;
      border: none;
      border-radius: 40px;
      font-weight: 500;
      cursor: pointer;
    }

    .team-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 24px;
      margin: 32px 0;
    }

    .project-card {
      background: white;
      border-radius: 32px;
      padding: 28px;
      border: 1px solid #eef2f9;
    }

    .project-card h4 {
      font-size: 1.4rem;
      font-weight: 500;
      margin-bottom: 12px;
    }

    .project-meta {
      display: flex;
      gap: 12px;
      margin: 16px 0;
      color: #5b6b8f;
      font-size: 0.9rem;
    }

    .project-link {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: #2b3b6b;
      text-decoration: none;
      font-weight: 500;
    }

    /* –¢—Ä–µ–∫–µ—Ä –∑–∞–¥–∞—á */
    .tracker-section {
      background: white;
      border-radius: 48px;
      padding: 40px;
      margin: 40px 0;
    }

    .tracker-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 32px;
    }

    .add-task-btn {
      padding: 12px 28px;
      background: #2b3b6b;
      color: white;
      border: none;
      border-radius: 40px;
      font-weight: 500;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .kanban-board {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
    }

    .kanban-col {
      background: #f9fbfe;
      border-radius: 32px;
      padding: 24px 16px;
      min-height: 400px;
    }

    .kanban-col h4 {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 20px;
      padding: 0 8px;
      color: #2b3b6b;
      font-size: 1.1rem;
    }

    .task-list {
      min-height: 300px;
    }

    .task-card {
      background: white;
      border-radius: 20px;
      padding: 20px;
      margin-bottom: 12px;
      border: 1px solid #eef2f9;
      cursor: grab;
      transition: box-shadow 0.2s, transform 0.1s;
      position: relative;
    }

    .task-card:active {
      cursor: grabbing;
      box-shadow: 0 10px 20px -8px rgba(0,0,0,0.2);
    }

    .task-card.dragging {
      opacity: 0.5;
      transform: scale(0.98);
    }

    .task-title {
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 8px;
      padding-right: 24px;
    }

    .task-desc {
      font-size: 0.9rem;
      color: #5b6b8f;
      margin-bottom: 12px;
    }

    .task-files {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 12px 0;
    }

    .file-tag {
      background: #eef2f9;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .task-actions {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
      margin-top: 12px;
      opacity: 0.7;
      transition: opacity 0.2s;
    }

    .task-card:hover .task-actions {
      opacity: 1;
    }

    .task-edit, .task-delete {
      background: none;
      border: none;
      cursor: pointer;
      padding: 4px;
      color: #8b9bb5;
    }

    .task-edit:hover, .task-delete:hover {
      color: #2b3b6b;
    }

    /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∑–∞–¥–∞—á–∏ */
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(15, 18, 28, 0.7);
      backdrop-filter: blur(6px);
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: white;
      max-width: 500px;
      width: 90%;
      border-radius: 48px;
      padding: 40px;
      position: relative;
    }

    .modal-close {
      position: absolute;
      top: 20px; right: 24px;
      background: none;
      border: none;
      font-size: 2rem;
      cursor: pointer;
      color: #7c7f93;
    }

    .modal h3 {
      font-size: 1.8rem;
      margin-bottom: 24px;
    }

    .modal input, .modal textarea {
      width: 100%;
      padding: 14px 20px;
      border: 1px solid #e2e8f0;
      border-radius: 30px;
      font-family: inherit;
      margin-bottom: 20px;
    }

    .modal textarea {
      min-height: 100px;
      resize: vertical;
    }

    .file-attach {
      border: 2px dashed #e2e8f0;
      border-radius: 30px;
      padding: 20px;
      text-align: center;
      margin-bottom: 20px;
      cursor: pointer;
    }

    .save-task-btn {
      width: 100%;
      padding: 16px;
      background: #2b3b6b;
      color: white;
      border: none;
      border-radius: 40px;
      font-weight: 500;
      cursor: pointer;
    }

    /* –ß–∞—Ç—ã */
    .chats-panel {
      background: white;
      border-radius: 48px;
      padding: 40px;
      margin: 40px 0;
    }

    .chat-links {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
      margin-top: 24px;
    }

    .chat-link {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 24px;
      background: #f9fbfe;
      border-radius: 40px;
      text-decoration: none;
      color: #1b1f2b;
      font-weight: 500;
    }

    .footer {
      padding: 48px 0;
      text-align: center;
      color: #6e7c9e;
      border-top: 1px solid rgba(0,0,0,0.03);
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="container header-content">
      <div class="logo">
        <a href="index.html">–ü–µ–¥–∞–≥–æ–≥–∏—á–µ—Å–∫–∏–π —Ç–µ—Ö–Ω–æ–ø–∞—Ä–∫</a>
      </div>
      <a href="index.html" class="back-link">
        <i data-feather="arrow-left"></i>
        <span>–ù–∞ –≥–ª–∞–≤–Ω—É—é</span>
      </a>
    </div>
  </header>

  <main>
    <section class="login-section">
      <div class="container">
        <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ -->
        <div class="login-card" id="loginCard">
          <h2>–í—Ö–æ–¥ –≤ –∫–∞–±–∏–Ω–µ—Ç</h2>
          <div class="login-sub">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç –ø—Ä–∞–∫—Ç–∏–∫–∏</div>
          
          <div class="track-selector">
            <button class="track-btn active" id="trackA1">–ê1 ¬∑ –°–µ–º–µ—Å—Ç—Ä</button>
            <button class="track-btn" id="trackA2">–ê2 ¬∑ –ò–Ω—Ç–µ–Ω—Å–∏–≤</button>
          </div>

          <div class="form-group">
            <label>–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è</label>
            <input type="text" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω" id="studentName">
          </div>

          <button class="login-btn" id="enterCabinetBtn">–í–æ–π—Ç–∏ –≤ –∫–∞–±–∏–Ω–µ—Ç</button>
        </div>

        <!-- –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç -->
        <div id="cabinetContent" style="display: none;">
          <!-- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ -->
          <div style="background: white; border-radius: 48px; padding: 40px; margin-bottom: 32px;">
            <h2 style="font-size: 2.2rem; margin-bottom: 8px;">–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, <span id="userNameDisplay">–°—Ç—É–¥–µ–Ω—Ç</span>!</h2>
            <p style="color: #3f4a6b;">–§–æ—Ä–º–∞—Ç –ø—Ä–∞–∫—Ç–∏–∫–∏: <span id="userTrackDisplay">–ê1 ¬∑ –°–µ–º–µ—Å—Ç—Ä</span></p>
          </div>

          <!-- –ö–æ–º–∞–Ω–¥–∞ –∏ –ø—Ä–æ–µ–∫—Ç—ã -->
          <div class="team-section" id="teamSection">
            <div class="team-header">
              <h3>–ú–æ—è –∫–æ–º–∞–Ω–¥–∞</h3>
              <button class="create-team-btn" id="createTeamBtn">+ –°–æ–∑–¥–∞—Ç—å –∫–æ–º–∞–Ω–¥—É</button>
            </div>
            <div class="team-grid" id="projectsGrid"></div>
          </div>

          <!-- –¢—Ä–µ–∫–µ—Ä –∑–∞–¥–∞—á (–ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ + —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ) -->
          <div class="tracker-section">
            <div class="tracker-header">
              <h3 style="font-size: 1.8rem;">–¢—Ä–µ–∫–µ—Ä –ø—Ä–æ–µ–∫—Ç–æ–≤</h3>
              <button class="add-task-btn" id="addTaskBtn">
                <i data-feather="plus"></i> –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É
              </button>
            </div>
            
            <div class="kanban-board" id="kanbanBoard">
              <div class="kanban-col" data-status="planned">
                <h4><i data-feather="circle"></i> –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ</h4>
                <div class="task-list" id="plannedList"></div>
              </div>
              <div class="kanban-col" data-status="inprogress">
                <h4><i data-feather="clock"></i> –í —Ä–∞–±–æ—Ç–µ</h4>
                <div class="task-list" id="inprogressList"></div>
              </div>
              <div class="kanban-col" data-status="done">
                <h4><i data-feather="check-circle"></i> –ì–æ—Ç–æ–≤–æ</h4>
                <div class="task-list" id="doneList"></div>
              </div>
            </div>
          </div>

          <!-- –ß–∞—Ç—ã -->
          <div class="chats-panel">
            <h3 style="font-size: 1.8rem; margin-bottom: 16px;">–û–±—â–µ–Ω–∏–µ</h3>
            <div class="chat-links">
              <a href="#" class="chat-link"><i data-feather="message-circle"></i> –ß–∞—Ç —Å–µ–º–µ—Å—Ç—Ä–∞</a>
              <a href="#" class="chat-link"><i data-feather="message-square"></i> –°–≤—è–∑—å —Å –∫—É—Ä–∞—Ç–æ—Ä–æ–º</a>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container">–¢–∫–∞—á–µ–Ω–∫–æ –ê–ª–∏—Å–∞ –û–ª–µ–≥–æ–≤–Ω–∞ ¬∑ –º–∞–≥–∏—Å—Ç–µ—Ä—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞</div>
  </footer>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∑–∞–¥–∞—á–∏ -->
  <div class="modal" id="taskModal">
    <div class="modal-content">
      <button class="modal-close" id="modalClose">&times;</button>
      <h3 id="modalTitle">–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</h3>
      <input type="text" id="taskNameInput" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏">
      <textarea id="taskDescInput" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏"></textarea>
      <div class="file-attach" id="fileAttachBtn">
        <i data-feather="paperclip"></i> –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª—ã
      </div>
      <div id="fileList" style="margin-bottom: 20px;"></div>
      <button class="save-task-btn" id="saveTaskBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    </div>
  </div>

  <script>
    feather.replace();

    // –î–∞–Ω–Ω—ã–µ
    let selectedTrack = '–ê1 ¬∑ –°–µ–º–µ—Å—Ç—Ä';
    let tasks = [];
    let currentTaskId = null;
    let draggedTask = null;

    // –≠–ª–µ–º–µ–Ω—Ç—ã
    const loginCard = document.getElementById('loginCard');
    const cabinetContent = document.getElementById('cabinetContent');
    const trackA1 = document.getElementById('trackA1');
    const trackA2 = document.getElementById('trackA2');
    const studentName = document.getElementById('studentName');
    const enterBtn = document.getElementById('enterCabinetBtn');
    const userNameDisplay = document.getElementById('userNameDisplay');
    const userTrackDisplay = document.getElementById('userTrackDisplay');
    const teamSection = document.getElementById('teamSection');
    const addTaskBtn = document.getElementById('addTaskBtn');
    const taskModal = document.getElementById('taskModal');
    const modalClose = document.getElementById('modalClose');
    const modalTitle = document.getElementById('modalTitle');
    const taskNameInput = document.getElementById('taskNameInput');
    const taskDescInput = document.getElementById('taskDescInput');
    const fileList = document.getElementById('fileList');
    const saveTaskBtn = document.getElementById('saveTaskBtn');
    const fileAttachBtn = document.getElementById('fileAttachBtn');

    let attachedFiles = [];

    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç—Ä–µ–∫–æ–≤
    trackA1.addEventListener('click', () => {
      trackA1.classList.add('active');
      trackA2.classList.remove('active');
      selectedTrack = '–ê1 ¬∑ –°–µ–º–µ—Å—Ç—Ä';
    });

    trackA2.addEventListener('click', () => {
      trackA2.classList.add('active');
      trackA1.classList.remove('active');
      selectedTrack = '–ê2 ¬∑ –ò–Ω—Ç–µ–Ω—Å–∏–≤';
    });

    // –í—Ö–æ–¥
    enterBtn.addEventListener('click', () => {
      const name = studentName.value.trim() || '–°—Ç—É–¥–µ–Ω—Ç';
      loginCard.style.display = 'none';
      cabinetContent.style.display = 'block';
      teamSection.style.display = 'block';
      userNameDisplay.textContent = name;
      userTrackDisplay.textContent = selectedTrack;
      
      // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
      loadSampleTasks();
    });

    // –ü—Ä–∏–º–µ—Ä –∑–∞–¥–∞—á
    function loadSampleTasks() {
      tasks = [
        { id: '1', title: '–í—ã–±—Ä–∞—Ç—å –ø—Ä–æ–¥—É–∫—Ç', desc: '–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å—Å—è —Å —Ç–µ–º–æ–π', files: [], status: 'planned' },
        { id: '2', title: '–°–æ–±—Ä–∞—Ç—å –º–∞–∫–µ—Ç', desc: '–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–∞–∑–µ—Ä–Ω—É—é —Ä–µ–∑–∫—É', files: ['–º–∞–∫–µ—Ç.dxf'], status: 'inprogress' },
        { id: '3', title: '–ù–∞–ø–∏—Å–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é', desc: '–û–ø–∏—Å–∞—Ç—å —Å–±–æ—Ä–∫—É', files: [], status: 'done' }
      ];
      renderTasks();
    }

    // –†–µ–Ω–¥–µ—Ä –∑–∞–¥–∞—á
    function renderTasks() {
      const plannedList = document.getElementById('plannedList');
      const inprogressList = document.getElementById('inprogressList');
      const doneList = document.getElementById('doneList');
      
      plannedList.innerHTML = '';
      inprogressList.innerHTML = '';
      doneList.innerHTML = '';

      tasks.forEach(task => {
        const taskEl = createTaskElement(task);
        if (task.status === 'planned') plannedList.appendChild(taskEl);
        else if (task.status === 'inprogress') inprogressList.appendChild(taskEl);
        else if (task.status === 'done') doneList.appendChild(taskEl);
      });

      feather.replace();
    }

    // –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ –∑–∞–¥–∞—á–∏
    function createTaskElement(task) {
      const div = document.createElement('div');
      div.className = 'task-card';
      div.draggable = true;
      div.dataset.id = task.id;

      let filesHtml = '';
      if (task.files && task.files.length) {
        filesHtml = '<div class="task-files">' + 
          task.files.map(f => `<span class="file-tag"><i data-feather="paperclip" style="width:12px;"></i> ${f}</span>`).join('') +
        '</div>';
      }

      div.innerHTML = `
        <div class="task-title">${task.title}</div>
        <div class="task-desc">${task.desc}</div>
        ${filesHtml}
        <div class="task-actions">
          <button class="task-edit" onclick="editTask('${task.id}')"><i data-feather="edit-2"></i></button>
          <button class="task-delete" onclick="deleteTask('${task.id}')"><i data-feather="trash-2"></i></button>
        </div>
      `;

      // Drag & drop
      div.addEventListener('dragstart', (e) => {
        draggedTask = task.id;
        div.classList.add('dragging');
      });

      div.addEventListener('dragend', (e) => {
        div.classList.remove('dragging');
        draggedTask = null;
      });

      return div;
    }

    // Drag & drop –º–µ–∂–¥—É –∫–æ–ª–æ–Ω–∫–∞–º–∏
    document.querySelectorAll('.task-list').forEach(list => {
      list.addEventListener('dragover', (e) => {
        e.preventDefault();
      });

      list.addEventListener('drop', (e) => {
        e.preventDefault();
        if (!draggedTask) return;

        const newStatus = list.closest('.kanban-col').dataset.status;
        const task = tasks.find(t => t.id === draggedTask);
        if (task) {
          task.status = newStatus;
          renderTasks();
        }
      });
    });

    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
    addTaskBtn.addEventListener('click', () => {
      currentTaskId = null;
      modalTitle.textContent = '–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞';
      taskNameInput.value = '';
      taskDescInput.value = '';
      attachedFiles = [];
      fileList.innerHTML = '';
      taskModal.classList.add('active');
    });

    // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
    window.editTask = (id) => {
      const task = tasks.find(t => t.id === id);
      if (task) {
        currentTaskId = id;
        modalTitle.textContent = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á—É';
        taskNameInput.value = task.title;
        taskDescInput.value = task.desc;
        attachedFiles = task.files || [];
        updateFileList();
        taskModal.classList.add('active');
      }
    };

    // –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
    window.deleteTask = (id) => {
      if (confirm('–£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É?')) {
        tasks = tasks.filter(t => t.id !== id);
        renderTasks();
      }
    };

    // –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
    fileAttachBtn.addEventListener('click', () => {
      const fileName = prompt('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ö–µ–º–∞.pdf)');
      if (fileName) {
        attachedFiles.push(fileName);
        updateFileList();
      }
    });

    function updateFileList() {
      fileList.innerHTML = attachedFiles.map(f => 
        `<span class="file-tag" style="display:inline-block; margin-right:8px;">üìé ${f}</span>`
      ).join('');
    }

    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
    saveTaskBtn.addEventListener('click', () => {
      const title = taskNameInput.value.trim();
      const desc = taskDescInput.value.trim();
      
      if (!title) {
        alert('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏');
        return;
      }

      if (currentTaskId) {
        // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
        const task = tasks.find(t => t.id === currentTaskId);
        if (task) {
          task.title = title;
          task.desc = desc;
          task.files = attachedFiles;
        }
      } else {
        // –ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞
        const newTask = {
          id: Date.now().toString(),
          title,
          desc,
          files: attachedFiles,
          status: 'planned'
        };
        tasks.push(newTask);
      }

      renderTasks();
      taskModal.classList.remove('active');
    });

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∫–∏
    modalClose.addEventListener('click', () => {
      taskModal.classList.remove('active');
    });

    taskModal.addEventListener('click', (e) => {
      if (e.target === taskModal) taskModal.classList.remove('active');
    });

    // –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
    const createTeamBtn = document.getElementById('createTeamBtn');
    const projectsGrid = document.getElementById('projectsGrid');
    
    createTeamBtn.addEventListener('click', () => {
      const teamName = prompt('–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã:');
      if (teamName) {
        const card = document.createElement('div');
        card.className = 'project-card';
        card.innerHTML = `
          <h4>${teamName}</h4>
          <p style="color:#5b6b8f;">–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤: 1</p>
          <a href="catalog.html" class="project-link">–ü—É–±–ª–∏—á–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ <i data-feather="external-link"></i></a>
        `;
        projectsGrid.appendChild(card);
        feather.replace();
      }
    });
  </script>
</body>
</html>
